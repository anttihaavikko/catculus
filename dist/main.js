(()=>{"use strict";var t={d:(i,n)=>{for(var o in n)t.t(n,o)&&!t.t(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:n[o]})},t:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};t.d({},{i:()=>z,o:()=>R});var i=function(){return window.__TAURI__},n=function(t,i){window.__TAURI__.core.invoke(t,i)};function o(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return u.play.apply(u,t)}var s,u={volume:.3,sampleRate:44100,x:new AudioContext,play:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return this.u(this.h.apply(this,t))},u:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=this.x.createBuffer(t.length,t[0].length,this.sampleRate),o=this.x.createBufferSource();return t.map((function(t,i){return n.getChannelData(i).set(t)})),o.buffer=n,o.connect(this.x.destination),o.start(),o},h:function(t,i,n,o,s,u,h,r,c,e,f,a,l,v,d,y,w,p,M,x){void 0===t&&(t=1),void 0===i&&(i=.05),void 0===n&&(n=220),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=.1),void 0===h&&(h=0),void 0===r&&(r=1),void 0===c&&(c=0),void 0===e&&(e=0),void 0===f&&(f=0),void 0===a&&(a=0),void 0===l&&(l=0),void 0===v&&(v=0),void 0===d&&(d=0),void 0===y&&(y=0),void 0===w&&(w=0),void 0===p&&(p=1),void 0===M&&(M=0),void 0===x&&(x=0);var _,m,b=2*Math.PI,O=this.sampleRate,j=c*=500*b/O/O,A=n*=(1+2*i*Math.random()-i)*b/O,g=[],S=0,C=0,T=0,E=1,F=0,k=0,B=0;for(o=o*O+9,M*=O,s*=O,u*=O,w*=O,e*=500*b/Math.pow(O,3),d*=b/O,f*=b/O,a*=O,l=l*O|0,m=o+M+s+u+w|0;T<m;g[T++]=B)++k%(100*y|0)||(B=h?h>1?h>2?h>3?Math.sin(Math.pow(S%b,3)):Math.max(Math.min(Math.tan(S),1),-1):1-(2*S/b%2+2)%2:1-4*Math.abs(Math.round(S/b)-S/b):Math.sin(S),B=(l?1-x+x*Math.sin(b*T/l):1)*(B>0?1:-1)*Math.pow(Math.abs(B),r)*t*this.volume*(T<o?T/o:T<o+M?1-(T-o)/M*(1-p):T<o+M+s?p:T<m-w?(m-T-w)/u*p:0),B=w?B/2+(w>T?0:(T<m-w?1:(m-T)/w)*g[T-w|0]/2):B),S+=(_=(n+=c+=e)*Math.cos(d*C++))-_*v*(1-1e9*(Math.sin(T)+1)%2),E&&++E>a&&(n+=f,A+=f,E=0),!l||++F%l||(n=A,c=j,E||(E=1));return g}},h=function(){function t(t,i,n){this.l=!1,this.v=1,this.p=1,this.M=document.createElement("audio"),t&&this._(),i&&this.m(),n&&this.O(),document.body.appendChild(this.M),this.j()}return t.prototype.j=function(){var t,i;this.v=parseFloat(null!==(t=localStorage.getItem("CoupAhooMusicVol"))&&void 0!==t?t:"0.5"),this.p=parseFloat(null!==(i=localStorage.getItem("CoupAhooSoundVol"))&&void 0!==i?i:"0.5"),this.A()},t.prototype.g=function(){this.l||i()||(this.l=!0)},t.prototype.A=function(){this.M.volume=this.S()*(this.C?.5:1)*this.v},t.prototype.T=function(){return this.M.playbackRate},t.prototype.F=function(t){i()?n("set_pitch",{pitch:t}):t<.1?this.M.volume=0:this.M.playbackRate=t},t.prototype.k=function(){return this.muted},t.prototype.B=function(t){if(this.muted=t,this.muted)return localStorage.setItem("CoupAhooMute","1"),void this.M.pause();localStorage.removeItem("CoupAhooMute"),this.H||this.M.play()},t.prototype.I=function(t){if(this.H=t,this.H)return localStorage.setItem("CoupAhooMusic","1"),void this.M.pause();localStorage.removeItem("CoupAhooMusic"),this.muted||this.M.play()},t.prototype.N=function(t){this.q=t,this.q?localStorage.setItem("CoupAhooSounds","1"):localStorage.removeItem("CoupAhooSounds")},t.prototype._=function(){this.B(!this.muted),i()?this.D():this.A()},t.prototype.m=function(){this.I(!this.H),i()?this.D():this.A()},t.prototype.V=function(){return this.q&&this.H},t.prototype.O=function(){this.N(!this.q)},t.prototype.D=function(){i()&&n("set_volume",{volume:this.S()*this.v})},t.prototype.S=function(){return this.muted||this.H?0:.7},t.prototype.R=function(t){this.muted||this.H||(this.F(t?.95:1),this.C=t,i()?this.D():this.A())},t.prototype.G=function(){var t,n=this;if(i())return t="play_music",window.__TAURI__.core.invoke(t),void this.D();var o=setInterval((function(){n.loaded&&(n.muted||n.H||n.M.play(),clearInterval(o))}),5)},t.prototype.play=function(t,s,u){var h=this;void 0===s&&(s="button"),void 0===u&&(u=1),this.muted||this.q||(i()?n("play_sound",{effect:s,volume:.6*u*this.p}):o.apply(void 0,t.map((function(t,i){return 0===i?.6*(null!=t?t:1)*h.p:t}))))},t.prototype.button=function(){this.play([1,,9,.01,.01,.01,,2.6,-17,,214,.01,,,,,,.72,.01,,-1386])},t.prototype.J=function(){},t.prototype.select=function(){},t.prototype.K=function(){this.play([1.3,,298,.02,.03,.05,,2.3,8,-29,,,,,,,.01,.83,.07]),this.play([.5,,678,,.01,.17,,2.1,-1,,,,,.1,40,,,.78,.03,,387])},t.prototype.L=function(){this.play([1.5,,633,.01,.01,.04,4,4.2,,,141,,,,12,,.01,.84,.01,.15])},t.prototype.P=function(t){this.play([.1*t,,33,.01,.03,.01,4,3.6,-34,2,,,,,,,.43,.53,.03,.06,171])},t.prototype.U=function(){this.play([1.6,,472,.01,.02,.22,2,2.2,,,,,.03,.8,1.8,,.16,.47,,.32,-1767])},t.prototype.W=function(){this.play([.9,,409,,.04,.06,,.9,,2,210,.08,.02,,,.1,,.5,.02,,-1495])},t.prototype.X=function(){this.play([1.3,,615,.01,.07,.09,,1.1,,,273,.05,,,,,.05,.98,.02])},t.prototype.Y=function(){this.play([3.5,,913,,.01,.03,1,4.2,-22,23,-43,.01,,,2.5,.4,.2,.6,.02,,375])},t.prototype.Z=function(){this.play([1.3,,449,.02,.05,.16,1,1.7,,,352,.07,.08,,30,.1,.04,.85,.02,,-1498])},t.prototype.step=function(t){t?this.play([.2,,210,.02,.04,.04,3,2.3,21,,,,.17,.4,,.1,.33,.61,.02,.4,-1437]):this.play([.2,,217,,.01,.02,,1.8,-37,,-93,,,,,,,.56,.03,,103])},t.prototype.$=function(){this.play([.9,,514,.07,.28,.44,1,2.8,,37,,,.09,.5,,,,.93,.14,.04,-1331])},t.prototype.tt=function(){this.play([,,95,.02,.24,.34,1,3.5,-9,,,,,.1,41,.2,,.35,.15,.47,-3344]),this.play([2.2,,48,,.01,.56,4,3.1,7,,,,.1,.6,,.9,.43,.49,.18,.05])},t.prototype.it=function(){this.play([.5,,189,,.27,.26,,.9,3,2,,,.07,.4,,,,.77,.16,.19,112])},t.prototype.nt=function(){this.play([1.4,,113,.03,.29,.14,1,.8,,,124,.08,.02,,,,.14,.92,.11,.17])},t.prototype.ot=function(){this.play([.5,,585,.07,.14,.06,1,3.5,,,-55,.09,.05,,,.1,,.52,.15,.46])},t.prototype.st=function(){this.play([2.1,,577,.03,.26,.07,,3.3,,-191,232,.08,.09,,,,.19,.5,.28,.41])},t.prototype.ut=function(){this.play([.8,,387,.1,.13,.06,,3.1,,,-142,.08,.03,.4,,,,.53,.14])},t.prototype.ht=function(){this.play([3,,264,.02,.17,.09,1,1.3,-12,-15,,,.09,,,.1,.17,.54,.16,.28])},t.prototype.prompt=function(){this.play([.2,,22,.02,.01,.04,,.7,-28,-56,,,,,,.1,,.63,.03,,-1010])},t.prototype.rt=function(){this.play([.6,,571,.02,.09,.08,,1.2,5,,,,,.3,,,,.53,.03])},t.prototype.ct=function(){this.play([.6,,146,,,.03,,1.6,,,-2,.11,,.1,,,,.83,.02])},t.prototype.et=function(){this.play([7,,59,.02,.01,.03,3,4.4,1,-73,-2,.03,.01,.3,118,,,.61,.03,.28,-534]),this.play([.9,,164,.04,.07,.14,1,1.7,,18,,,,.1,,.1,,.88,.05,,-767])},t}(),r=function(t){return function(t,i,n){return Math.min(Math.max(t,i),n)}(t,0,1)},c={x:0,y:0},e=function(){function t(t){this.ft=t,this.time=0,this.type="none",this.lt=function(t){return(i=t)<4/11?121*i*i/16:i<8/11?9.075*i*i-9.9*i+3.4:i<.9?4356/361*i*i-35442/1805*i+16061/1805:10.8*i*i-20.52*i+10.72;var i}}return t.prototype.isActive=function(){return this.active},t.prototype.scale=function(t,i){this.type="scale";var n=this.ft.scale;this.start={x:n.x,y:n.y},this.vt(t,i)},t.prototype.move=function(t,i){this.type="move";var n=this.ft.dt;this.start={x:n.x,y:n.y},this.vt(t,i)},t.prototype.rotate=function(t,i){this.type="rotate";var n=this.ft.rotation;this.start={x:n,y:n},this.vt({x:t,y:t},i)},t.prototype.yt=function(t){this.lt=t},t.prototype.vt=function(t,i){this.target=t,this.duration=1e3*i,this.active=!0,this.startTime=-1},t.prototype.stop=function(){this.type,this.active=!1},t.prototype.update=function(t){if(this.startTime<0||"none"==this.type)this.startTime=t;else if(this.active&&(this.time=r((t-this.startTime)/this.duration),this.start&&this.target)){var i,n,o,s,u=(i=this.start,n=this.target,o=this.time,void 0===(s=this.lt)&&(s=function(t){return t}),{x:i.x+s(o)*(n.x-i.x),y:i.y+s(o)*(n.y-i.y)});"move"==this.type&&(this.ft.dt={x:u.x,y:u.y}),"scale"==this.type&&(this.ft.scale={x:u.x,y:u.y}),"rotate"==this.type&&(this.ft.rotation=u.x),this.active=this.time<1}},t.wt=function(t,i){void 0===i&&(i=1e3);for(var n=function(n){setTimeout((function(){return t(n)}),n*i)},o=0;o<1;o+=.01)n(o)},t}(),f=function(){function t(t,i,n,o,s){this.Mt=t,this.scale={x:1,y:1},this.d=0,this.rotation=0,this.xt=0,this._t=0,this.bt=0,this.Ot=0,this.jt=.005,this.delta=0,this.dt={x:i,y:n},this.s={x:o,y:s},this.At=new e(this),this.xt=Math.random()}return t.prototype.update=function(t,i){this.delta=t-this._t,this._t=t,this.At.update(t),this.bt=Math.sin(t*this.jt+this.xt),this.Ot=Math.abs(this.bt)},t.prototype.gt=function(t){},t.prototype.St=function(){return{x:this.dt.x+.5*this.s.x,y:this.dt.y+.5*this.s.y}},t.prototype.setPosition=function(t,i){this.dt={x:t,y:i}},t.prototype.Ct=function(t,i){void 0===i&&(i=0);var n=this.St();return t.x>n.x-.5*this.s.x*this.scale.x-.5*i&&t.x<n.x+.5*this.s.x*this.scale.x+.5*i&&t.y>n.y-.5*this.s.y*this.scale.y-.5*i&&t.y<n.y+.5*this.s.y*this.scale.y+.5*i},t.prototype.Tt=function(t){t.save(),t.translate(this.dt.x,this.dt.y),this.gt(t),t.restore()},t}(),a=(s=function(t,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},s(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),l=function(t){function i(i,n){void 0===n&&(n=0);var o=t.call(this,i,0,0,0,0)||this;return o.d=500,setTimeout((function(){return o.open()}),n),o}return a(i,t),i.prototype.open=function(t){void 0===t&&(t=function(){}),this.At.scale({x:0,y:0},.5),setTimeout(t,500)},i.prototype.close=function(t){void 0===t&&(t=function(){}),this.At.scale({x:1,y:1},.4),setTimeout(t,500)},i.prototype.gt=function(t){t.fillStyle="#000",t.fillRect(0,0,.55*R*this.scale.x,z),t.fillRect(R-.55*R*this.scale.x,0,R*this.scale.x,z)},i}(f),v=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=1),t+Math.random()*(i-t)},d=function(t){return t[Math.floor(Math.random()*t.length)]},y=function(){return Math.random()<.5?1:-1},w=function(){function t(){this.offset=c,this.pan=c,this.shift=0,this.Et=0,this.Ft=0}return t.prototype.kt=function(t,i,n){var o=this;void 0===n&&(n=0),this.Et=t,this.Ft=n/360*Math.PI,clearTimeout(this.Bt),this.Bt=setTimeout((function(){return o.reset()}),1e3*i)},t.prototype.update=function(){this.offset={x:v(-this.Et,this.Et),y:v(-this.Et,this.Et)},this.rotation=v(-this.Ft,this.Ft)},t.prototype.reset=function(){this.Et=0,this.Ft=0},t}(),p=function(){function t(t){this.M=t,this.value=this.target=this.M.T();var i=navigator.userAgent.toLowerCase();this.disabled=["iphone","ipad"].some((function(t){return i.includes(t)}))||i.includes("macintosh")&&navigator.maxTouchPoints>0}return t.prototype.update=function(t){if(!this.disabled){var i=this.target-this.value;Math.abs(i)<.01||(this.value+=1e-4*Math.sign(i)*t*this.speed,this.M.F(this.value))}},t.prototype.Ht=function(t,i){void 0===i&&(i=1),this.speed=i,this.value=t},t.prototype.It=function(t,i){void 0===i&&(i=1),this.speed=i,this.target=t},t}(),M=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(){return x=Object.assign||function(t){for(var i,n=1,o=arguments.length;n<o;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t},x.apply(this,arguments)},_=function(t){function i(i,n){var o=t.call(this,null,0,0,0,0)||this;return o.M=i,o.canvas=n,o.Nt=new w,o.qt=[],o.Dt=[],o.Vt=new p(i),o.Rt=new l(o,400),o}return M(i,t),i.prototype.click=function(t,i){var n;this.zt=!1,null===(n=this.Gt)||void 0===n||n.Jt().forEach((function(n){n.visible&&n.Ct(t)&&n.Kt(i)}))},i.prototype.Lt=function(t){this.qt.push(t)},i.prototype.Pt=function(t){this.Dt.push(t)},i.prototype.Qt=function(){this.qt=[],this.Dt=[]},i.prototype.pressed=function(t){t.repeat||this.qt.forEach((function(i){return i(t)}))},i.prototype.Ut=function(t){this.Dt.forEach((function(i){return i(t)}))},i.prototype.Wt=function(){return this.Xt},i.prototype.update=function(i,n){var o;t.prototype.update.call(this,i,n),null===(o=this.Gt)||void 0===o||o.update(i,n),this.Nt.update(),this.Rt.update(i,n),this.Vt.update(this.delta),n.Yt=!1,this.Xt=x({},n)},i.prototype.gt=function(t){var i,n;t.fillStyle=null===(i=this.Gt)||void 0===i?void 0:i.Zt(),t.fillRect(0,0,800,600),t.save(),t.rotate(this.Nt.rotation),t.scale(this.Nt.zoom,this.Nt.zoom),t.translate(this.Nt.offset.x-this.Nt.pan.x+this.Nt.shift,this.Nt.offset.y+this.Nt.pan.y),null===(n=this.Gt)||void 0===n||n.gt(t),t.restore()},i.prototype.$t=function(t){var i=this;this.Rt.close((function(){i.Gt=t,i.Rt.open()}))},i.prototype.ti=function(){return this.Rt},i}(f),m=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t,i,n){if(n||2===arguments.length)for(var o,s=0,u=i.length;s<u;s++)!o&&s in i||(o||(o=Array.prototype.slice.call(i,0,s)),o[s]=i[s]);return t.concat(o||Array.prototype.slice.call(i))},O=function(t){function i(i,n,o,s){var u;void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=[]);var h=t.call(this,i,n,o,0,0)||this;return h.children=[],(u=h.children).push.apply(u,s),h}return m(i,t),i.prototype.Zt=function(){return"#ccc"},i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.children.forEach((function(t){return t.update(i,n)})),this.children.some((function(t){return t.ii}))&&(this.children=this.children.filter((function(t){return!t.ii})))},i.prototype.hide=function(t){void 0===t&&(t=.3),this.At.scale({x:0,y:0},t)},i.prototype.show=function(t){void 0===t&&(t=.3),this.At.scale({x:1,y:1},t)},i.prototype.gt=function(t){t.save(),b([],this.children,!0).sort((function(t,i){return t.d-i.d})).forEach((function(i){return i.gt(t)})),t.restore()},i.prototype.ni=function(t){return this.children[t]},i.prototype.oi=function(){return this.children},i.prototype.add=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(t=this.children).push.apply(t,i)},i.prototype.clear=function(){this.children=[]},i.prototype.Jt=function(){return[]},i}(f),j="Saira Condensed,Arial Black,HelveticaNeue-CondensedBlack,arial,sans-serif",A=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=function(t){function i(i,n,o,s,u,h,r){var c=t.call(this,i,n,o,s,u)||this;return c.si=h,c.ui=r,c.ratio=1,c.start=-1,c}return A(i,t),i.prototype.update=function(t,i){this.ii||this.si<0||(this.dt={x:this.dt.x+this.ui.x,y:this.dt.y+this.ui.y},this.ratio=1-(t-this.start)/(1e3*this.si),this.start<0&&(this.start=t),t-this.start>1e3*this.si&&(this.ii=!0))},i}(f),S=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(t){function i(i,n,o,s,u,h,r,c){var e=t.call(this,i,s,u,0,0,h,r)||this;return e.content=n,e.fontSize=o,e.options=c,e}return S(i,t),i.prototype.gt=function(t){var i,n,o,s,u,h,r,c;t.save(),t.rotate(null!==(n=null===(i=this.options)||void 0===i?void 0:i.angle)&&void 0!==n?n:0);var e=(null===(o=this.options)||void 0===o?void 0:o.hi)?this.ratio:1;t.font="".concat(this.fontSize*e,"px ").concat(j),t.textAlign=null!==(u=null===(s=this.options)||void 0===s?void 0:s.align)&&void 0!==u?u:"center",(null===(h=this.options)||void 0===h?void 0:h.ri)&&(t.fillStyle="#000",t.fillText(this.content,this.dt.x+this.options.ri,this.dt.y+this.options.ri)),t.fillStyle=null!==(c=null===(r=this.options)||void 0===r?void 0:r.color)&&void 0!==c?c:"#fff",t.fillText(this.content,this.dt.x,this.dt.y),t.restore()},i.prototype.ci=function(t){var i,n=(null===(i=this.options)||void 0===i?void 0:i.hi)?this.ratio:1;return t.font="".concat(this.fontSize*n,"px ").concat(j),Math.max.apply(Math,this.content.split("\n").map((function(i){return t.measureText(i).width})))},i}(g),T=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(t){function i(i,n,o,s,u,h,r,e){var f=t.call(this,i,n,o,s,u,-1,c,e)||this;return f.frequency=h,f.amplitude=r,f.time=0,f.ei=[],f.fi=!1,f.font=j,f.scale={x:1,y:1},f}return T(i,t),i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.At.update(i),this.time=i},i.prototype.toggle=function(t){var i=this;clearTimeout(this.Bt),this.Bt=setTimeout((function(){i.content=t,i.ai(i.fi)}),t?0:200);var n=t?1:0;this.At.scale({x:n,y:n},.2)},i.prototype.gt=function(t){var i,n,o,s,u,h,c,e,f,a,l,v=this;t.save(),t.rotate(null!==(n=null===(i=this.options)||void 0===i?void 0:i.angle)&&void 0!==n?n:0),this.ratio=r(this.scale.x);var d=(null===(o=this.options)||void 0===o?void 0:o.hi)?this.ratio:1;t.textAlign="left",t.font="".concat(this.fontSize*d,"px ").concat("Matemasie,Arial Black,HelveticaNeue-CondensedBlack,arial,sans-serif");var y=null!==(u=null===(s=this.options)||void 0===s?void 0:s.spacing)&&void 0!==u?u:0,w=this.ci(t);this.width=w,t.lineJoin="round";var p=!1;(null===(h=this.options)||void 0===h?void 0:h.background)&&(t.fillStyle=this.options.background,t.beginPath(),t.rect(this.dt.x-.5*w-15,this.dt.y-30,w+30,47),t.fill(),(null===(c=this.options)||void 0===c?void 0:c.border)&&(t.strokeStyle=this.options.border,t.lineWidth=null!==(e=this.options.borderWidth)&&void 0!==e?e:1,t.stroke()));var M=("center"!==(null===(f=this.options)||void 0===f?void 0:f.align)&&(null===(a=this.options)||void 0===a?void 0:a.align)?0:.5*-w)-this.content.replace(/\|/g,"").length*y*.5;"right"==(null===(l=this.options)||void 0===l?void 0:l.align)&&(M=-w);var x=0;t.translate(this.dt.x+M,this.dt.y),this.content.split("").forEach((function(i){var n,o,s,u,h,r,c,e;if("|"!==i){var f=null!==(o=null===(n=v.ei[x])||void 0===n?void 0:n.x)&&void 0!==o?o:1,a=null!==(u=null===(s=v.ei[x])||void 0===s?void 0:s.y)&&void 0!==u?u:1,l=t.measureText(i),d=l.width,w=l.actualBoundingBoxAscent+.5*l.actualBoundingBoxDescent;t.save(),t.translate(.5*d,.5*-w),t.scale(f,a),t.translate(.5*-d,.5*w),(null===(h=v.options)||void 0===h?void 0:h.ri)&&(t.fillStyle="#000",t.fillText(i,y*x*f+v.options.ri*f,v.options.ri*a+Math.sin(.005*v.time+x*v.frequency)*v.amplitude*a)),t.fillStyle=p?"#f2e949":null!==(c=null===(r=v.options)||void 0===r?void 0:r.color)&&void 0!==c?c:"#fff",(null===(e=v.options)||void 0===e?void 0:e.outline)&&(t.strokeStyle="#000",t.lineWidth=v.options.outline*v.ratio,t.strokeText(i,y*x*f,Math.sin(.005*v.time+x*v.frequency)*v.amplitude*a)),t.fillText(i,y*x*f,Math.sin(.005*v.time+x*v.frequency)*v.amplitude*a),t.restore(),t.translate(d,0),x++}else p=!p})),t.restore()},i.prototype.li=function(t){this.font=t},i.prototype.ai=function(t){void 0===t&&(t=!0),this.fi=t,this.ei=t?this.content.replace(/\|/g,"").split("").map((function(){return{x:y(),y:y()}})):[]},i.prototype.vi=function(){return this.width},i.prototype.ci=function(t){var i,n=(null===(i=this.options)||void 0===i?void 0:i.hi)?this.ratio:1;return t.font="".concat(this.fontSize*n,"px ").concat(this.font),Math.max.apply(Math,this.content.split("\n").map((function(i){return t.measureText(i.replace(/\|/g,"")).width})))},i.prototype.di=function(t,i){this.fontSize=t,this.options.ri=i},i}(C),F=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=40,B=function(t){function i(i,n){var o=this,s=n%D,u=Math.floor(n/D);return(o=t.call(this,i,50+46*s,45+46*u,k,k)||this).value=s-1+3*(u-2),(s<2||s>4||u<2||u>4)&&(o.value=1,o.hidden=!0),o}return F(i,t),i.prototype.yi=function(){this.hidden=!1,this.scale={x:0,y:0},this.At.scale({x:1,y:1},.3)},i.prototype.wi=function(t){return i=this.dt,n=t.dt,o=Math.abs(i.x-n.x),s=Math.abs(i.y-n.y),Math.sqrt(o*o+s*s)<60;var i,n,o,s},i.prototype.update=function(i,n){this.pi=this.Ct(n,1),t.prototype.update.call(this,i,n)},i.prototype.gt=function(t){if(!this.hidden){t.save(),t.fillStyle=this.pi?"yellow":"#fff",this.Mi&&(t.fillStyle="orange");var i=this.pi?"red":"#000";t.strokeStyle=i,t.beginPath(),t.lineWidth=7,t.translate(this.dt.x,this.dt.y),t.translate(.5*this.s.x,.5*this.s.y),t.scale(this.scale.x,this.scale.y),t.translate(.5*-this.s.x,.5*-this.s.y),t.rect(0,0,this.s.x,this.s.y),t.stroke(),t.fill(),t.fillStyle=i,t.textAlign="center",t.textBaseline="middle",t.font="20px ".concat(j),t.fillText(this.value.toString(),this.s.x/2,this.s.y/2),t.restore()}},i}(f),H=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=function(t){function i(i,n,o){return t.call(this,i,n,30,o.x+20,o.y+10,v(.7,.9),{x:0,y:v(-.5,-.7)},{ri:3,hi:!0})||this}return H(i,t),i.prototype.update=function(i,n){t.prototype.update.call(this,i,n),this.ratio=Math.sin(this.ratio/2*Math.PI)},i}(C),N=function(){var t=function(i,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},t(i,n)};return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),q=function(t,i,n){if(n||2===arguments.length)for(var o,s=0,u=i.length;s<u;s++)!o&&s in i||(o||(o=Array.prototype.slice.call(i,0,s)),o[s]=i[s]);return t.concat(o||Array.prototype.slice.call(i))},D=7,V=function(t){function i(i){var n=t.call(this,i)||this;return n.xi=[],n.level=0,n._i=Array.from(Array(D*D)).map((function(t,n){return new B(i,n)})),n.mi=new C(i,"",50,500,220,-1,c,{ri:5}),n.bi=new E(i,"",25,.5*R,30,.5,3,{ri:3}),n.add.apply(n,q(q([],n._i,!1),[n.mi,n.bi],!1)),n.Oi(),n}return N(i,t),i.prototype.update=function(i,n){var o=this;if(t.prototype.update.call(this,i,n),this.Mt.canvas.style.cursor=this._i.some((function(t){return!t.hidden&&t.pi}))?"pointer":"default",n.Yt&&!this.locked){var s=this._i.find((function(t){return t.pi}));if(s&&!s.hidden&&(0===this.xi.length||this.xi.some((function(t){return t.wi(s)})))){s.Mi=!s.Mi,this.toggle(s);var u=this.xi.reduce((function(t,i){return t+i.value}),0);this.bi.content=this.xi.length>1?"".concat(this.xi.map((function(t){return t.value})).join("+"),"=").concat(u):"",u>=this.target&&(console.log("DONE, DIFF: ".concat(u-this.target)),this.xi.sort((function(t,i){return t.value-i.value})).forEach((function(t,i){setTimeout((function(){o.add(new I(o.Mt,(t.value*o.xi.length).toString(),t.dt))}),75*i)})),setTimeout((function(){o._i.filter((function(t){return t.hidden&&o.xi.some((function(i){return i.wi(t)}))})).forEach((function(t){return t.yi()})),o.xi.forEach((function(t){t.Mi=!1,t.value++})),o.xi=[],o.Oi(),o.bi.content=""}),1e3))}}},i.prototype.Oi=function(){this.level++,this.target=this.ji(this.level+1),this.mi.content=this.target.toString()},i.prototype.ji=function(t){for(var i=[d(this._i.filter((function(t){return!t.hidden})))],n=0;n<Math.min(t,Math.floor(this._i.filter((function(t){return!t.hidden})).length/2))-1;n++)i.push(d(this._i.filter((function(t){return!t.hidden&&!i.includes(t)&&i.some((function(i){return i.wi(t)}))}))));return i.reduce((function(t,i){return t+i.value}),0)},i.prototype.toggle=function(t){this.xi.includes(t)?this.xi=this.xi.filter((function(i){return i!==t})):this.xi.push(t)},i.prototype.gt=function(i){i.save(),i.fillStyle="#333",i.fillRect(0,0,i.canvas.width,i.canvas.height),t.prototype.gt.call(this,i),i.restore()},i}(O),R=800,z=400,G=document.createElement("canvas"),J=G.getContext("2d"),K={x:0,y:0},L=new h(!1,!1,!1);L.g(),L.G();var P=new _(L,G);P.Gt=new V(P),G.id="game",G.width=R,G.height=z,document.body.appendChild(G);var Q=1,U=0,W=0,X=function(){Q=Math.min(window.innerWidth/R,window.innerHeight/z),G.style.transformOrigin="top left",U=.5*(window.innerWidth-R*Q),W=.5*(window.innerHeight-z*Q),G.style.transform="translate(".concat(U,"px,").concat(W,"px) scale(").concat(Q,")")};X(),window.onresize=X;var Y=!1;document.onfullscreenchange=function(){return Y=!Y},document.onmousemove=function(t){K.x=Y?(t.offsetX-U)/Q:t.offsetX,K.y=Y?(t.offsetY-W)/Q:t.offsetY},window.onkeydown=function(t){L.G(),P.pressed(t)},window.onkeyup=function(t){P.Ut(t)},document.oncontextmenu=function(t){t.preventDefault()},document.onmousedown=function(t){L.G(),K.Yt=!0,K.Ai=!0,P.click(K,2===t.button)},document.onmouseup=function(){return K.Ai=!1};var Z=function(t){requestAnimationFrame(Z),J.resetTransform(),P.update(t,K),P.gt(J)};requestAnimationFrame(Z)})();